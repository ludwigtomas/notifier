import{r as o,c as N,g as U,y as O,j as e,d as w,a as q}from"./app-LEKQh0La.js";import{A as Z}from"./AuthenticatedLayout-UtRQhGcL.js";import{M as J,D as K,S as Q}from"./SecondaryButton-JYc4VxTO.js";import{T as V}from"./TextInput-xogRaHiX.js";import{P as Y}from"./Pagination-xB7_pUKt.js";import{C as ee,E as te}from"./EyeIcon-vRd0Ms9e.js";import{X as T}from"./XMarkIcon-mO2FJCnz.js";import{P as re}from"./PencilSquareIcon-mxp12bYg.js";import{T as I}from"./TrashIcon-vUmJuf7j.js";import"./ApplicationLogo-MVzeTHqB.js";import"./Dropdown-mHODfxua.js";import"./transition-ZMstbjJ0.js";function ne({title:t,titleId:n,...a},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},a),t?o.createElement("title",{id:n},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const se=o.forwardRef(ne),ae=se;function ie({title:t,titleId:n,...a},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},a),t?o.createElement("title",{id:n},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const ce=o.forwardRef(ie),E=ce;function oe(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var D=oe,le=typeof N=="object"&&N&&N.Object===Object&&N,de=le,me=de,xe=typeof self=="object"&&self&&self.Object===Object&&self,fe=me||xe||Function("return this")(),G=fe,he=G,ue=function(){return he.Date.now()},pe=ue,ge=/\s/;function je(t){for(var n=t.length;n--&&ge.test(t.charAt(n)););return n}var be=je,ve=be,ye=/^\s+/;function Ne(t){return t&&t.slice(0,ve(t)+1).replace(ye,"")}var we=Ne,ze=G,Te=ze.Symbol,A=Te,R=A,B=Object.prototype,Se=B.hasOwnProperty,ke=B.toString,b=R?R.toStringTag:void 0;function _e(t){var n=Se.call(t,b),a=t[b];try{t[b]=void 0;var i=!0}catch{}var l=ke.call(t);return i&&(n?t[b]=a:delete t[b]),l}var $e=_e,Oe=Object.prototype,Ie=Oe.toString;function Ee(t){return Ie.call(t)}var Re=Ee,C=A,Ce=$e,Le=Re,Me="[object Null]",Pe="[object Undefined]",L=C?C.toStringTag:void 0;function We(t){return t==null?t===void 0?Pe:Me:L&&L in Object(t)?Ce(t):Le(t)}var De=We;function Ge(t){return t!=null&&typeof t=="object"}var Ae=Ge,Be=De,Fe=Ae,He="[object Symbol]";function Xe(t){return typeof t=="symbol"||Fe(t)&&Be(t)==He}var Ue=Xe,qe=we,M=D,Ze=Ue,P=NaN,Je=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,Qe=/^0o[0-7]+$/i,Ve=parseInt;function Ye(t){if(typeof t=="number")return t;if(Ze(t))return P;if(M(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=M(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=qe(t);var a=Ke.test(t);return a||Qe.test(t)?Ve(t.slice(2),a?2:8):Je.test(t)?P:+t}var et=Ye,tt=D,S=pe,W=et,rt="Expected a function",nt=Math.max,st=Math.min;function at(t,n,a){var i,l,d,x,c,m,h=0,p=!1,u=!1,g=!0;if(typeof t!="function")throw new TypeError(rt);n=W(n)||0,tt(a)&&(p=!!a.leading,u="maxWait"in a,d=u?nt(W(a.maxWait)||0,n):d,g="trailing"in a?!!a.trailing:g);function r(s){var f=i,j=l;return i=l=void 0,h=s,x=t.apply(j,f),x}function v(s){return h=s,c=setTimeout(y,n),p?r(s):x}function F(s){var f=s-m,j=s-h,$=n-f;return u?st($,d-j):$}function k(s){var f=s-m,j=s-h;return m===void 0||f>=n||f<0||u&&j>=d}function y(){var s=S();if(k(s))return _(s);c=setTimeout(y,F(s))}function _(s){return c=void 0,g&&i?r(s):(i=l=void 0,x)}function H(){c!==void 0&&clearTimeout(c),h=0,i=m=l=c=void 0}function X(){return c===void 0?x:_(S())}function z(){var s=S(),f=k(s);if(i=arguments,l=this,m=s,f){if(c===void 0)return v(m);if(u)return clearTimeout(c),c=setTimeout(y,n),r(m)}return c===void 0&&(c=setTimeout(y,n)),x}return z.cancel=H,z.flush=X,z}var it=at;const ct=U(it);function vt({auth:t,repositories:n,filters:a}){const[i,l]=o.useState(!1),[d,x]=o.useState(null),[c,m]=o.useState(a.search||""),h=r=>{x(r),l(!0)},p=()=>{l(!1)},u=()=>{let r=route("repositories.destroy",d.id);O.delete(r,{preserveScroll:!0,onSuccess:()=>p()})},g=ct(r=>{O.get(route("repositories.index"),{search:r},{preserveScroll:!0,preserveState:!0})},100);return e.jsxs(Z,{user:t.user,header:e.jsxs("header",{className:"flex items-center justify-start flex-row space-x-4 text-zinc-500",children:[e.jsx(w,{className:"font-semibold text-lg leading-tight hover:text-sky-500 slower-animation",href:route("dashboard.index"),children:"Dashboard"}),e.jsx("span",{children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx(w,{className:"font-semibold text-lg leading-tight text-sky-500",href:route("repositories.index"),children:"Repozitáře"})]}),children:[e.jsx(q,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-[90rem] mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-2",children:e.jsx(V,{label:"Hledat",name:"search",placeholder:"Hledat repozitář",type:"text",className:"w-72",value:c,onChange:r=>{m(r.target.value),g(r.target.value)}})}),e.jsx("div",{className:"bg-zinc-900 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"border-4 border-zinc-900 divide-y divide-zinc-800 ",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-700 rounded-md overflow-hidden",children:[e.jsx("thead",{className:"bg-zinc-950",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Gitlab"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Web"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Analytics"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Repozitář"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Slug"}),e.jsx("th",{scope:"col",className:"px-12 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Počet klientů"}),e.jsx("th",{scope:"col",className:"px-12 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Počet databází"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Nejnovější commit"}),e.jsx("th",{scope:"col",className:"relative py-3.5 px-4",children:e.jsx("span",{className:"sr-only",children:"Edit"})})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-700 bg-zinc-900",children:n.data.map(r=>e.jsxs("tr",{className:"group hover:bg-zinc-800",children:[e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.id})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:r.repository_url?e.jsx("a",{className:"group bg-green-950 p-2 rounded-xl",href:r.repository_url,target:"_blank",rel:"noreferrer noopener",children:e.jsx(E,{className:"text-green-500 w-6 h-6"})}):e.jsx("div",{className:"bg-red-950 p-2 rounded-xl",children:e.jsx(T,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("div",{className:"flex items-center justify-center",children:r.website_url?e.jsx("a",{className:"bg-green-950 p-2 rounded-xl",href:r.repository_url,target:"_blank",children:e.jsx(E,{className:"text-green-500 w-6 h-6"})}):e.jsx("div",{className:"bg-red-950 p-2 rounded-xl",children:e.jsx(T,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"p-2 rounded-xl "+(r.analytics_property_id?"bg-green-950":"bg-red-950"),children:r.analytics_property_id?e.jsx(ae,{className:"w-6 h-6 text-green-500"}):e.jsx(T,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.name})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.slug})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsxs("div",{className:"flex items-center gap-x-2 ",children:[r.relationships.clients.slice(0,2).map(v=>e.jsx("p",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-900 faster-animation",children:v.name},v.id)),r.relationships.clients_count>2&&e.jsxs("span",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-700 faster-animation",children:["+"," ",r.relationships.clients_count-2]})]})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-900 faster-animation",children:r.relationships.database_backups_count})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.last_commit_at_human})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{href:route("repositories.edit",r.id),className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-green-500 faster-animation",children:e.jsx(re,{className:"w-6 h-6 text-green-500"})}),e.jsx(w,{href:route("repositories.show",r.id),className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-sky-500 faster-animation",children:e.jsx(te,{className:"w-6 h-6 text-sky-500"})}),e.jsx("button",{className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-red-500 faster-animation",onClick:()=>h(r),children:e.jsx(I,{className:"w-6 h-6 text-red-500"})})]})})]},r.id))})]})})}),e.jsx("div",{children:e.jsx(Y,{class:"mt-6",links:n.meta})})]})}),e.jsx(J,{maxWidth:"md",show:i,onClose:p,className:"p-10",children:d&&e.jsxs("form",{className:"p-4 flex flex-col space-y-4",onSubmit:u,children:[e.jsx("h2",{className:"text-2xl font-medium text-gray-800 text-center",children:d.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Chystáš se smazat repozitář společně se všemi databázemi a klienty. Tato akce je nevratná."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(K,{type:"submit",children:[e.jsx(I,{className:"w-6 h-6 mr-2"}),d.name]}),e.jsx(Q,{onClick:p,children:"Zavřít"})]})]})})]})}export{vt as default};
