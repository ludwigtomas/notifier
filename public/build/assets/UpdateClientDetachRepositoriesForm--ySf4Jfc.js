import{r as p,W as h,j as e,d as n}from"./app-q7DrAXM7.js";import{I as g}from"./InputError-yTu2cMcV.js";import{T as f}from"./TextInput-KRypRbN2.js";import{A as j}from"./ArchiveBoxIcon-KLesTSI9.js";import{X as N}from"./XMarkIcon-o9K6zZSa.js";import{C as b}from"./CheckIcon-qXmoxNa2.js";import{P as v}from"./PencilSquareIcon-nx8jYRoe.js";import{T as y}from"./TrashIcon-tK6GOUZB.js";function T({client:s,className:l}){const[r,i]=p.useState(null),{data:c,setData:a,patch:o,errors:m,processing:w,recentlySuccessful:S}=h({client_email:"",relationship:"client_repository"}),d=t=>{t.preventDefault(),delete route("client.repository.detach",repository.id)},x=t=>{t.preventDefault(),o(route("client.repository.update",[s.id,r]),{preserveScroll:!0,onSuccess:()=>{i(null),a("client_email","")}})};return e.jsxs("section",{className:l,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-100",children:"Detach repositories"}),e.jsxs("p",{className:"maxmt-1 text-sm text-gray-400",children:["Defaultně se využije ",e.jsx("code",{children:"client.email"}),", případně lze zadat custom pro každého klienta."]})]}),e.jsx("form",{onSubmit:d,className:"mt-6 grid grid-cols-12 gap-5",children:s.relationships.repositories.map(t=>e.jsx("div",{className:"col-span-12 sm:col-span-6 lg:col-span-4",children:e.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-zinc-700 rounded-lg",children:e.jsx(j,{className:"w-6 h-6 text-sky-500"})}),e.jsxs("div",{children:[e.jsx(n,{href:route("repositories.show",t.id),className:"text-lg font-semibold text-gray-100",children:t.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:s.email??"N/A"}),r==t.id?e.jsxs(e.Fragment,{children:[e.jsx(f,{id:"client_email",type:"email",className:"mt-1 block w-full",placeholder:"info@ludwigtomas.cz",value:c.client_email,onChange:u=>a("client_email",u.target.value),isFocused:!0,required:!0}),e.jsx(g,{className:"mt-2",message:m.client_email})]}):e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:t.client_email??"N/A"})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:r===t.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>i(null),className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-red-500 faster-animation",children:e.jsx(N,{className:"w-6 h-6 text-red-500 group-hover:text-red-100"})}),e.jsx("button",{type:"submit",onClick:x,className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-green-500 faster-animation",children:e.jsx(b,{className:"w-6 h-6 text-green-500 group-hover:text-green-100"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{i(t.id),a("client_email",t.client_email??"")},className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-green-500 faster-animation",children:e.jsx(v,{className:"w-6 h-6 text-green-500 group-hover:text-green-100"})}),e.jsx(n,{as:"button",method:"DELETE",preserveScroll:!0,className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-red-500 faster-animation",href:route("client.repository.detach",{client:s.id,repository:t.id}),children:e.jsx(y,{className:"w-6 h-6 text-red-500 group-hover:text-red-100"})})]})})]})},t.id))})]})}export{T as default};
