import{r as p,c as y,g as U,y as I,j as e,d as z,a as q}from"./app-CjTzU-qI.js";import{A as Z}from"./AuthenticatedLayout-hZocV6K_.js";import{M as J,D as K,S as Q}from"./SecondaryButton-T6D31DRV.js";import{T as V}from"./TextInput-Jl0rlZis.js";import{P as Y}from"./Pagination-Tlm0l5Is.js";import{C as ee,E as te}from"./EyeIcon-mWiQ65_w.js";import{X as S}from"./XMarkIcon-7vebjNa9.js";import{C as re}from"./CheckIcon-dWVByx9o.js";import{P as ne}from"./PencilSquareIcon-0zaUH8jq.js";import{T as O}from"./TrashIcon-406V1Jac.js";import"./ApplicationLogo-RqJZQtPy.js";import"./Dropdown-4sQ0wfJb.js";import"./transition-iAGVnNcq.js";function se({title:t,titleId:n,...a},c){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":n},a),t?p.createElement("title",{id:n},t):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const ae=p.forwardRef(se),E=ae;function ie(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var W=ie,ce=typeof y=="object"&&y&&y.Object===Object&&y,le=ce,oe=le,de=typeof self=="object"&&self&&self.Object===Object&&self,me=oe||de||Function("return this")(),G=me,xe=G,fe=function(){return xe.Date.now()},he=fe,pe=/\s/;function ue(t){for(var n=t.length;n--&&pe.test(t.charAt(n)););return n}var je=ue,ge=je,be=/^\s+/;function ve(t){return t&&t.slice(0,ge(t)+1).replace(be,"")}var Ne=ve,ye=G,ze=ye.Symbol,A=ze,C=A,B=Object.prototype,Te=B.hasOwnProperty,Se=B.toString,b=C?C.toStringTag:void 0;function we(t){var n=Te.call(t,b),a=t[b];try{t[b]=void 0;var c=!0}catch{}var l=Se.call(t);return c&&(n?t[b]=a:delete t[b]),l}var _e=we,ke=Object.prototype,$e=ke.toString;function Ie(t){return $e.call(t)}var Oe=Ie,R=A,Ee=_e,Ce=Oe,Re="[object Null]",Me="[object Undefined]",M=R?R.toStringTag:void 0;function Le(t){return t==null?t===void 0?Me:Re:M&&M in Object(t)?Ee(t):Ce(t)}var Pe=Le;function De(t){return t!=null&&typeof t=="object"}var We=De,Ge=Pe,Ae=We,Be="[object Symbol]";function Fe(t){return typeof t=="symbol"||Ae(t)&&Ge(t)==Be}var He=Fe,Xe=Ne,L=W,Ue=He,P=NaN,qe=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Je=/^0o[0-7]+$/i,Ke=parseInt;function Qe(t){if(typeof t=="number")return t;if(Ue(t))return P;if(L(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=L(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Xe(t);var a=Ze.test(t);return a||Je.test(t)?Ke(t.slice(2),a?2:8):qe.test(t)?P:+t}var Ve=Qe,Ye=W,w=he,D=Ve,et="Expected a function",tt=Math.max,rt=Math.min;function nt(t,n,a){var c,l,o,m,i,d,f=0,u=!1,h=!1,j=!0;if(typeof t!="function")throw new TypeError(et);n=D(n)||0,Ye(a)&&(u=!!a.leading,h="maxWait"in a,o=h?tt(D(a.maxWait)||0,n):o,j="trailing"in a?!!a.trailing:j);function r(s){var x=c,g=l;return c=l=void 0,f=s,m=t.apply(g,x),m}function v(s){return f=s,i=setTimeout(N,n),u?r(s):m}function F(s){var x=s-d,g=s-f,$=n-x;return h?rt($,o-g):$}function _(s){var x=s-d,g=s-f;return d===void 0||x>=n||x<0||h&&g>=o}function N(){var s=w();if(_(s))return k(s);i=setTimeout(N,F(s))}function k(s){return i=void 0,j&&c?r(s):(c=l=void 0,m)}function H(){i!==void 0&&clearTimeout(i),f=0,c=d=l=i=void 0}function X(){return i===void 0?m:k(w())}function T(){var s=w(),x=_(s);if(c=arguments,l=this,d=s,x){if(i===void 0)return v(d);if(h)return clearTimeout(i),i=setTimeout(N,n),r(d)}return i===void 0&&(i=setTimeout(N,n)),m}return T.cancel=H,T.flush=X,T}var st=nt;const at=U(st);function bt({auth:t,repositories:n,filters:a}){const[c,l]=p.useState(!1),[o,m]=p.useState(null),[i,d]=p.useState(a.search||""),f=r=>{m(r),l(!0)},u=()=>{l(!1)},h=()=>{let r=route("repositories.destroy",o.id);I.delete(r,{preserveScroll:!0,onSuccess:()=>u()})},j=at(r=>{I.get(route("repositories.index"),{search:r},{preserveScroll:!0,preserveState:!0})},100);return e.jsxs(Z,{user:t.user,header:e.jsxs("header",{className:"flex items-center justify-start flex-row space-x-4 text-zinc-500",children:[e.jsx(z,{className:"font-semibold text-lg leading-tight hover:text-sky-500 slower-animation",href:route("dashboard.index"),children:"Dashboard"}),e.jsx("span",{children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx(z,{className:"font-semibold text-lg leading-tight text-sky-500",href:route("repositories.index"),children:"Repozitáře"})]}),children:[e.jsx(q,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-[90rem] mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-2",children:e.jsx(V,{label:"Hledat",name:"search",placeholder:"Hledat repozitář",type:"text",className:"w-72",value:i,onChange:r=>{d(r.target.value),j(r.target.value)}})}),e.jsx("div",{className:"bg-zinc-900 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"border-4 border-zinc-900 divide-y divide-zinc-800 ",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-700 rounded-md overflow-hidden",children:[e.jsx("thead",{className:"bg-zinc-950 text-nowrap",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Gitlab"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Web"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-center text-zinc-400",children:"Analytics"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Repozitář"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Slug"}),e.jsx("th",{scope:"col",className:"px-12 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Počet klientů"}),e.jsx("th",{scope:"col",className:"px-12 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Počet databází"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left text-zinc-400",children:"Nejnovější commit"}),e.jsx("th",{scope:"col",className:"relative py-3.5 px-4",children:e.jsx("span",{className:"sr-only",children:"Edit"})})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-700 bg-zinc-900",children:n.data.map(r=>e.jsxs("tr",{className:"group hover:bg-zinc-800",children:[e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.id})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:r.repository_url?e.jsx("a",{className:"group bg-green-950 p-2 rounded-xl",href:r.repository_url,target:"_blank",rel:"noreferrer noopener",children:e.jsx(E,{className:"text-green-500 w-6 h-6"})}):e.jsx("div",{className:"bg-red-950 p-2 rounded-xl",children:e.jsx(S,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("div",{className:"flex items-center justify-center",children:r.website_url?e.jsx("a",{className:"bg-green-950 p-2 rounded-xl",href:r.repository_url,target:"_blank",children:e.jsx(E,{className:"text-green-500 w-6 h-6"})}):e.jsx("div",{className:"bg-red-950 p-2 rounded-xl",children:e.jsx(S,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"p-2 rounded-xl "+(r.analytics_property_id?"bg-green-950":"bg-red-950"),children:r.analytics_property_id?e.jsx(re,{className:"w-6 h-6 text-green-500"}):e.jsx(S,{className:"text-red-500 w-6 h-6"})})})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.name})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.slug})}),e.jsx("td",{className:"px-4 py-4 ",children:e.jsxs("div",{className:"flex items-center gap-x-2 text-nowrap ",children:[r.relationships.clients.slice(0,2).map(v=>e.jsx("p",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-900 faster-animation",children:v.name},v.id)),r.relationships.clients_count>2&&e.jsxs("span",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-700 faster-animation",children:["+"," ",r.relationships.clients_count-2]})]})}),e.jsx("td",{className:"px-4 py-4 text-center ",children:e.jsx("span",{className:"px-3 py-1 text-xs text-zinc-400 rounded-full bg-zinc-800 group-hover:bg-zinc-900 faster-animation",children:r.relationships.database_backups_count})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm font-medium text-zinc-400",children:r.last_commit_at_human})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{href:route("repositories.edit",r.id),className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-green-500 faster-animation",children:e.jsx(ne,{className:"w-6 h-6 text-green-500"})}),e.jsx(z,{href:route("repositories.show",r.id),className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-sky-500 faster-animation",children:e.jsx(te,{className:"w-6 h-6 text-sky-500"})}),e.jsx("button",{className:"bg-zinc-800 group-hover:bg-zinc-900 p-1 rounded-lg border border-transparent hover:border-red-500 faster-animation",onClick:()=>f(r),children:e.jsx(O,{className:"w-6 h-6 text-red-500"})})]})})]},r.id))})]})})}),e.jsx("div",{children:e.jsx(Y,{class:"mt-6",links:n.meta})})]})}),e.jsx(J,{maxWidth:"md",show:c,onClose:u,className:"p-10",children:o&&e.jsxs("form",{className:"p-4 flex flex-col space-y-4",onSubmit:h,children:[e.jsx("h2",{className:"text-2xl font-medium text-gray-800 text-center",children:o.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Chystáš se smazat repozitář společně se všemi databázemi a klienty. Tato akce je nevratná."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(K,{type:"submit",children:[e.jsx(O,{className:"w-6 h-6 mr-2"}),o.name]}),e.jsx(Q,{onClick:u,children:"Zavřít"})]})]})})]})}export{bt as default};
