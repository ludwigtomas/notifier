import{r as u,W as p,j as e,d as h}from"./app-CjTzU-qI.js";import{T as l}from"./TextInput-Jl0rlZis.js";import{U as g}from"./UserIcon-wEekdLDy.js";import{X as f}from"./XMarkIcon-7vebjNa9.js";import{C as j}from"./CheckIcon-dWVByx9o.js";import{P as b}from"./PencilSquareIcon-0zaUH8jq.js";import{T as v}from"./TrashIcon-406V1Jac.js";function E({repository:s,className:i=""}){const[r,n]=u.useState(null),{data:c,setData:a,patch:o,errors:N,processing:y,recentlySuccessful:w}=p({client_email:""}),m=t=>{t.preventDefault(),delete route("repository.clients.detach",s.id)},d=t=>{t.preventDefault(),o(route("repository.clients.update",[s.id,r]),{preserveScroll:!0,onSuccess:()=>{n(null),a("client_email","")}})};return e.jsxs("section",{className:i,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-100",children:"Attached Clients"}),e.jsxs("p",{className:"maxmt-1 text-sm text-gray-400",children:["Defaultně se využije ",e.jsx("code",{children:"client.email"}),", případně lze zadat custom pro každého klienta."]})]}),e.jsx("form",{onSubmit:m,className:"mt-6 grid grid-cols-12 gap-5",children:s.relationships.clients.map(t=>e.jsx("div",{className:"col-span-12 sm:col-span-6 lg:col-span-4",children:e.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-zinc-700 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-sky-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:t.name}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:t.email??"N/A"}),r===t.id?e.jsx(e.Fragment,{children:e.jsx(l,{id:"client_email",type:"email",className:"mt-1 block w-full",value:c.client_email,onChange:x=>a("client_email",x.target.value),isFocused:!0,required:!0})}):e.jsx(l,{id:"client_email",type:"text",disabled:!0,value:t.client_email??"undefined",className:"mt-1 block w-full cursor-not-allowed bg-zinc-700/40 border-zinc-800 !text-gray-400"})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:r===t.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>n(null),className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-red-500 faster-animation",children:e.jsx(f,{className:"w-6 h-6 text-red-500 group-hover:text-red-100"})}),e.jsx("button",{type:"submit",onClick:d,className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-green-500 faster-animation",children:e.jsx(j,{className:"w-6 h-6 text-green-500 group-hover:text-green-100"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{n(t.id),a("client_email",t.client_email??"")},className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-green-500 faster-animation",children:e.jsx(b,{className:"w-6 h-6 text-green-500 group-hover:text-green-100"})}),e.jsx(h,{as:"button",method:"DELETE",preserveScroll:!0,className:"group inline-flex items-center text-sm bg-zinc-900 px-3 py-2 rounded-md hover:bg-red-500 faster-animation",href:route("repository.clients.detach",{repository:s.id,client:t.id}),children:e.jsx(v,{className:"w-6 h-6 text-red-500 group-hover:text-red-100"})})]})})]})},t.id))})]})}export{E as default};
